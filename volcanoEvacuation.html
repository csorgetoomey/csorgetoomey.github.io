<!DOCTYPE HTML>
<html>
	<head>
		<!-- the leaflet CSS and JS library-->
		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css"
		   	integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
		   	crossorigin=""/>
		<!-- Make sure you put this AFTER Leaflet's CSS -->
		<script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"
		   	integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA=="
		   	crossorigin=""></script>
		<!-- Add JQuery to get local GeoJson file -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

	</head>
	<body>
		<div id="map" style='width: 800px; height: 600px;'></div>
		<script> 
			//basemap from https://leaflet-extras.github.io/leaflet-providers/preview/
			//provided by thunderforest
			var Thunderforest_Outdoors = L.tileLayer('https://{s}.tile.thunderforest.com/outdoors/{z}/{x}/{y}.png?apikey={apikey}', {
				attribution: '&copy; <a href="http://www.thunderforest.com/">Thunderforest</a>, &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',
				apikey: 'a9344dc9e7ec4d359f7d851a3131b86b',
				maxZoom: 22
			});

			var map = new L.Map("map", {
				center: new L.LatLng(47.221769, -122.457158),
				zoom: 12
			});
			map.addLayer(Thunderforest_Outdoors);
			//map.scrollWheelZoom.disable()

			//evacuation route style
			var laharStyle = {
			    "color": "red",
			    "weight": 0,
			};

			//time of travel style
			var timeStyle = {
			    "color": "red",
			    "weight": 5,
			};

			//display lahars
			$.getJSON("assets/geojson/Volcanic_Hazards.geojson",function(lahars){
				L.geoJson(lahars, {
					style: laharStyle
				}).addTo(map).bindPopup("Lahars"); 
			});

			//display evacuation routes
			$.getJSON("assets/geojson/Volcanic_Time_of_Travel.geojson",function(travelTime) {
				var timeLayer = L.geoJson(travelTime, {
					style: timeStyle,
					style: function(feature) {
						switch (feature.properties.TIME_ZONE) {
							case 'A': return {color: "red"};
							case 'B': return {color: "blue"};
							case 'C': return {color: "green"};
							case 'D': return {color: "purple"};
						}
					},
					onEachFeature: function(feature, layer) {
						layer.bindPopup('<h1>Time Zone: ' + feature.properties.TIME_ZONE + '</h1>');
					},

				}).addTo(map); 

				map.on("overlayadd", function (event) {
					timeLayer.bringToFront();
				});
			});

		</script>
	</body>
</html>